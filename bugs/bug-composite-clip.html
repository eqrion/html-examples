<!DOCTYPE html>
<html>

<style type="text/css">
    canvas {
        border: 1px solid #d3d3d3;
    }
</style>

<span>With Composite</span>
<canvas id="a" width="300" height="300">
</canvas>

<span>Without Composite</span>
<canvas id="b" width="300" height="300">
</canvas>

<script type="text/javascript">
    function withComposite(canvas) {
        var ctx = canvas.getContext("2d");

        ctx.globalCompositeOperation = "color";
        ctx.rect(10, 10, 160, 160);
        ctx.clip();

        ctx.fillStyle = "blue";
        ctx.fillRect(10, 10, 150, 150);
        ctx.fillStyle = "red";
        ctx.fillRect(50, 50, 150, 150);
    }

    function withoutComposite(canvas) {
        var ctx = canvas.getContext("2d");

        ctx.rect(10, 10, 160, 160);
        ctx.clip();

        ctx.fillStyle = "blue";
        ctx.fillRect(10, 10, 150, 150);
        ctx.fillStyle = "red";
        ctx.fillRect(50, 50, 150, 150);
    }

    withComposite(document.getElementById('a'));
    withoutComposite(document.getElementById('b'));
</script>

</html>
